# ============================================================================
# ChittySync AlertRouter - Environment Configuration
# ============================================================================

# ----------------------------------------------------------------------------
# Gmail Configuration
# ----------------------------------------------------------------------------
ALERT_EMAIL=alerts@chitty.cc
ADMIN_EMAIL=admin@chitty.cc

# Gmail labels will be auto-created:
# - ChittySync/Critical (ðŸ”´)
# - ChittySync/High (ðŸŸ )
# - ChittySync/Medium (ðŸŸ¡)
# - ChittySync/Info (ðŸŸ¢)

# ----------------------------------------------------------------------------
# Google Chat Configuration
# ----------------------------------------------------------------------------

# Primary webhook (general alerts)
GOOGLE_CHAT_WEBHOOK_URL=https://chat.googleapis.com/v1/spaces/AAAA.../messages?key=...&token=...

# Space-specific webhooks (optional, falls back to primary)
CHAT_SPACE_CRITICAL=https://chat.googleapis.com/v1/spaces/CRITICAL-SPACE/messages?key=...&token=...
CHAT_SPACE_OPS=https://chat.googleapis.com/v1/spaces/OPS-SPACE/messages?key=...&token=...
CHAT_SPACE_GENERAL=https://chat.googleapis.com/v1/spaces/GENERAL-SPACE/messages?key=...&token=...

# How to get webhook URLs:
# 1. Open Google Chat Space
# 2. Click space name â†’ Apps & integrations
# 3. Click "Add webhooks"
# 4. Create webhook, copy URL

# ----------------------------------------------------------------------------
# Google Calendar Configuration
# ----------------------------------------------------------------------------

# Calendar ID (use 'primary' for personal calendar or specific calendar ID)
GOOGLE_CALENDAR_ID=primary
# Or use specific calendar: c_abc123@group.calendar.google.com

# SLA reminder times (in minutes)
# Critical: 15 min
# High: 1 hour
# Medium: 4 hours
# Low: 24 hours

# ----------------------------------------------------------------------------
# Google Sheets Configuration
# ----------------------------------------------------------------------------

# Spreadsheet ID (from URL: https://docs.google.com/spreadsheets/d/{SPREADSHEET_ID}/edit)
INCIDENT_LOG_SHEET_ID=1A2B3C4D5E6F7G8H9I0J

# Sheet name (tab name, will be created if doesn't exist)
INCIDENT_SHEET_NAME=Incidents

# Columns:
# A: Timestamp
# B: Alert ID
# C: Severity
# D: Source
# E: Title
# F: Message
# G: Context (JSON)
# H: Action URL
# I: Status (OPEN/RESOLVED/CLOSED)
# J: Resolution
# K: Notes

# ----------------------------------------------------------------------------
# Google Service Account Credentials
# ----------------------------------------------------------------------------

# Option 1: Path to service account JSON file
GOOGLE_APPLICATION_CREDENTIALS=/Users/nb/.config/gcloud/service-account.json

# Option 2: Inline JSON (for cloud deployment)
# GOOGLE_SERVICE_ACCOUNT_JSON='{"type":"service_account","project_id":"...",...}'

# ----------------------------------------------------------------------------
# How to Set Up Service Account
# ----------------------------------------------------------------------------

# 1. Go to: https://console.cloud.google.com/iam-admin/serviceaccounts
# 2. Create service account with these permissions:
#    - Gmail API: gmail.send, gmail.labels
#    - Calendar API: calendar.events
#    - Sheets API: spreadsheets
#
# 3. Enable APIs:
#    - Gmail API: https://console.cloud.google.com/apis/library/gmail.googleapis.com
#    - Calendar API: https://console.cloud.google.com/apis/library/calendar-json.googleapis.com
#    - Sheets API: https://console.cloud.google.com/apis/library/sheets.googleapis.com
#
# 4. Create key (JSON format), download to:
#    ~/.config/gcloud/service-account.json
#
# 5. Share calendar and spreadsheet with service account email:
#    service-account-name@project-id.iam.gserviceaccount.com

# ----------------------------------------------------------------------------
# Optional: Alert Routing Rules
# ----------------------------------------------------------------------------

# Disable specific channels (set to false)
ALERT_GMAIL_ENABLED=true
ALERT_CHAT_ENABLED=true
ALERT_CALENDAR_ENABLED=true
ALERT_SHEETS_ENABLED=true

# Minimum severity to trigger (critical, high, medium, low)
ALERT_MIN_SEVERITY=low

# Throttling (max alerts per channel per hour)
ALERT_THROTTLE_GMAIL=100
ALERT_THROTTLE_CHAT=50
ALERT_THROTTLE_CALENDAR=20
ALERT_THROTTLE_SHEETS=1000
