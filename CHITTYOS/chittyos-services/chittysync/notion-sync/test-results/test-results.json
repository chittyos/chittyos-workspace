{
  "suites": [
    {
      "name": "QA Functional Tests",
      "file": "test/qa-test-suite.js",
      "success": false,
      "exitCode": 1,
      "duration": 30024,
      "stats": null,
      "output": "‚ñ∂ QA Test Suite - Core Functionality\n  ‚úî Schema Validation - Valid Fact (5.017667ms)\n  ‚úî Schema Validation - Invalid Fact (0.158416ms)\n  ‚úñ Deduplication Logic (0.664542ms)\nInitializing Notion Sync Worker...\n  ‚úî Retry Mechanism (39.830958ms)\n  ‚úî Rate Limiter (0.451542ms)\n  ‚úî Dead Letter Queue Operations (0.326708ms)\n  ‚úî Sync Monitor Metrics (0.263209ms)\n‚úñ QA Test Suite - Core Functionality (47.834917ms)\n‚úÖ Connected to Notion database: Atomic Facts\nValidating database schema...\n‚ö†Ô∏è Schema validation issues found: [\n  { field: 'Fact', expected: 'rich_text', actual: 'title' },\n  { field: 'Fact', expected: 'rich_text', actual: 'title' },\n  {\n    field: 'FactType',\n    issue: 'missing_options',\n    missing: [\n      'DATE',\n      'AMOUNT',\n      'ADMISSION',\n      'IDENTITY',\n      'LOCATION',\n      'RELATIONSHIP',\n      'ACTION',\n      'STATUS'\n    ]\n  },\n  {\n    field: 'VerificationStatus',\n    issue: 'missing_options',\n    missing: [\n      'FACT',\n      'SUPPORTED_CLAIM',\n      'ASSERTION',\n      'ALLEGATION',\n      'CONTRADICTION'\n    ]\n  },\n  {\n    field: 'VerificationStatus',\n    issue: 'missing_options',\n    missing: [ 'Minted', 'Rejected' ]\n  },\n  {\n    field: 'SupportingEvidence',\n    expected: 'multi_select',\n    actual: 'rich_text'\n  }\n]\n‚úÖ Notion Sync Worker initialized successfully\nStarting sync of 1 atomic facts \n‚ñ∂ QA Test Suite - Integration Tests\n  ‚úî Notion API Connection (0.464125ms)\n@notionhq/client warn: request fail { code: 'validation_error', message: 'Fact is expected to be title.' }\nProcessing 1 failed operations...\nüíÄ Added 1 items to DLQ\nüìä Sync Summary: {\n  totalFacts: 1,\n  duplicatesRemoved: 0,\n  processed: 1,\n  created: 0,\n  updated: 0,\n  skipped: 0,\n  errors: 1,\n  successRate: 0,\n  duration: 4914,\n  dryRun: false\n}\nStarting sync of 5 atomic facts \n  ‚úñ Single Fact Sync (4915.540375ms)\n@notionhq/client warn: request fail { code: 'validation_error', message: 'Fact is expected to be title.' }\n@notionhq/client warn: request fail { code: 'validation_error', message: 'Fact is expected to be title.' }\n@notionhq/client warn: request fail { code: 'validation_error', message: 'Fact is expected to be title.' }\n@notionhq/client warn: request fail { code: 'validation_error', message: 'Fact is expected to be title.' }\n@notionhq/client warn: request fail { code: 'validation_error', message: 'Fact is expected to be title.' }\nProcessing 5 failed operations...\nüíÄ Added 5 items to DLQ\nüìä Sync Summary: {\n  totalFacts: 5,\n  duplicatesRemoved: 0,\n  processed: 5,\n  created: 0,\n  updated: 0,\n  skipped: 0,\n  errors: 5,\n  successRate: 0,\n  duration: 8494,\n  dryRun: false\n}\nStarting sync of 1 atomic facts \n  ‚úñ Batch Sync (8494.981708ms)\n@notionhq/client warn: request fail { code: 'validation_error', message: 'Fact is expected to be title.' }\nProcessing 1 failed operations...\nüíÄ Added 1 items to DLQ\nüìä Sync Summary: {\n  totalFacts: 1,\n  duplicatesRemoved: 0,\n  processed: 1,\n  created: 0,\n  updated: 0,\n  skipped: 0,\n  errors: 1,\n  successRate: 0,\n  duration: 435,\n  dryRun: false\n}\nStarting sync of 1 atomic facts \n@notionhq/client warn: request fail { code: 'validation_error', message: 'Fact is expected to be title.' }\nProcessing 1 failed operations...\nüíÄ Added 1 items to DLQ\nüìä Sync Summary: {\n  totalFacts: 1,\n  duplicatesRemoved: 0,\n  processed: 1,\n  created: 0,\n  updated: 0,\n  skipped: 0,\n  errors: 1,\n  successRate: 0,\n  duration: 752,\n  dryRun: false\n}\nProcessing DLQ retries...\nFound 1 items ready for retry\nStarting sync of 1 atomic facts \n  ‚úñ Idempotency Test (1187.40325ms)\n@notionhq/client warn: request fail { code: 'validation_error', message: 'Fact is expected to be title.' }\nProcessing 1 failed operations...\nüíÄ Added 1 items to DLQ\nüìä Sync Summary: {\n  totalFacts: 1,\n  duplicatesRemoved: 0,\n  processed: 1,\n  created: 0,\n  updated: 0,\n  skipped: 0,\n  errors: 1,\n  successRate: 0,\n  duration: 316,\n  dryRun: false\n}\n‚úÖ Retry succeeded for TEST-1758243466374-rbdwluv6q\nStopping sync worker...\nInitializing Notion Sync Worker...\n  ‚úî DLQ Processing (316.037583ms)\n‚úñ QA Test Suite - Integration Tests (15444.925ms)\n‚úÖ Connected to Notion database: Atomic Facts\nValidating database schema...\n‚ö†Ô∏è Schema validation issues found: [\n  { field: 'Fact', expected: 'rich_text', actual: 'title' },\n  { field: 'Fact', expected: 'rich_text', actual: 'title' },\n  {\n    field: 'FactType',\n    issue: 'missing_options',\n    missing: [\n      'DATE',\n      'AMOUNT',\n      'ADMISSION',\n      'IDENTITY',\n      'LOCATION',\n      'RELATIONSHIP',\n      'ACTION',\n      'STATUS'\n    ]\n  },\n  {\n    field: 'VerificationStatus',\n    issue: 'missing_options',\n    missing: [\n      'FACT',\n      'SUPPORTED_CLAIM',\n      'ASSERTION',\n      'ALLEGATION',\n      'CONTRADICTION'\n    ]\n  },\n  {\n    field: 'VerificationStatus',\n    issue: 'missing_options',\n    missing: [ 'Minted', 'Rejected' ]\n  },\n  {\n    field: 'SupportingEvidence',\n    expected: 'multi_select',\n    actual: 'rich_text'\n  }\n]\n‚úÖ Notion Sync Worker initialized successfully\nStarting sync of 100 atomic facts (DRY RUN)\n‚úñ test/qa-test-suite.js (29944.531625ms)\n‚Ñπ tests 13\n‚Ñπ suites 2\n‚Ñπ pass 8\n‚Ñπ fail 4\n‚Ñπ cancelled 1\n‚Ñπ skipped 0\n‚Ñπ todo 0\n‚Ñπ duration_ms 29945.112583\n\n‚úñ failing tests:\n\ntest at test/qa-test-suite.js:66:3\n‚úñ Deduplication Logic (0.664542ms)\n  AssertionError [ERR_ASSERTION]: Should identify unique facts\n  \n  3 !== 2\n  \n      at TestContext.<anonymous> (file:///Users/nb/.claude/projects/notion-sync/test/qa-test-suite.js:78:12)\n      at Test.runInAsyncScope (node:async_hooks:214:14)\n      at Test.run (node:internal/test_runner/test:1062:25)\n      at Suite.processPendingSubtests (node:internal/test_runner/test:752:18)\n      at Test.postRun (node:internal/test_runner/test:1191:19)\n      at Test.run (node:internal/test_runner/test:1119:12)\n      at async Suite.processPendingSubtests (node:internal/test_runner/test:752:7) {\n    generatedMessage: false,\n    code: 'ERR_ASSERTION',\n    actual: 3,\n    expected: 2,\n    operator: 'strictEqual'\n  }\n\ntest at test/qa-test-suite.js:194:3\n‚úñ Single Fact Sync (4915.540375ms)\n  AssertionError [ERR_ASSERTION]: Should create or update fact\n      at TestContext.<anonymous> (file:///Users/nb/.claude/projects/notion-sync/test/qa-test-suite.js:203:12)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n      at async Test.run (node:internal/test_runner/test:1069:7)\n      at async Suite.processPendingSubtests (node:internal/test_runner/test:752:7) {\n    generatedMessage: false,\n    code: 'ERR_ASSERTION',\n    actual: false,\n    expected: true,\n    operator: '=='\n  }\n\ntest at test/qa-test-suite.js:208:3\n‚úñ Batch Sync (8494.981708ms)\n  AssertionError [ERR_ASSERTION]: Should have good success rate\n      at TestContext.<anonymous> (file:///Users/nb/.claude/projects/notion-sync/test/qa-test-suite.js:217:12)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n      at async Test.run (node:internal/test_runner/test:1069:7)\n      at async Suite.processPendingSubtests (node:internal/test_runner/test:752:7) {\n    generatedMessage: false,\n    code: 'ERR_ASSERTION',\n    actual: false,\n    expected: true,\n    operator: '=='\n  }\n\ntest at test/qa-test-suite.js:221:3\n‚úñ Idempotency Test (1187.40325ms)\n  AssertionError [ERR_ASSERTION]: First sync should create\n      at TestContext.<anonymous> (file:///Users/nb/.claude/projects/notion-sync/test/qa-test-suite.js:230:12)\n      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n      at async Test.run (node:internal/test_runner/test:1069:7)\n      at async Suite.processPendingSubtests (node:internal/test_runner/test:752:7) {\n    generatedMessage: false,\n    code: 'ERR_ASSERTION',\n    actual: false,\n    expected: true,\n    operator: '=='\n  }\n\ntest at test/qa-test-suite.js:1:1\n‚úñ test/qa-test-suite.js (29944.531625ms)\n  'Promise resolution is still pending but the event loop has already resolved'\n",
      "error": ""
    }
  ],
  "summary": {
    "total": 0,
    "passed": 0,
    "failed": 0,
    "skipped": 0,
    "duration": 30024,
    "coverage": null
  },
  "environment": {
    "node": "v24.4.1",
    "platform": "darwin",
    "timestamp": "2025-09-19T00:57:45.646Z",
    "ci": false
  }
}